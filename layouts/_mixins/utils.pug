mixin get-link(post, size='sm', thumbnail, long, link)
  - var urlRef = link || post

  if post.datetaken
    - var srcset = get_srcset(post)
    - var _class = thumbnail ? 'thumb' : ''

    if thumbnail && size == 'lg'
      //- large thumbnail 240px
      - var img_sizes = '(min-width: 1024px) 21vw, 33vw'
      - var src = get_src(post, 240)
    else if thumbnail
      //- small thumbnail 150px
      - var img_sizes = '(min-width: 640px) 13vw, 33vw'
      - var src = get_src(post, 150)
    else if size == 'lg'
      //- large image 1024px
      - var img_sizes = '(min-width: 1024px) 66vw, 100vw'
      - var src = get_src(post, 1024)
    else
      //- small image 640px
      - var img_sizes = '(min-width: 640px) 50vw, 100vw'
      - var src = get_src(post, 640)

    if !(thumbnail || link) && size == 'lg'
      img.fit(sizes=img_sizes, srcset=srcset, src=src, title=post.title)
    else
      a(href=url_for(urlRef.path), class=_class)
        img.fit(sizes=img_sizes, srcset=srcset, src=src, title=post.title)
  else if post.description && long
    a(href=url_for(urlRef.path)) #{post.title}: #{post.description}
  else if post.title
    a(href=url_for(urlRef.path))= post.title

mixin list-tags(tags, size, minCount=1)
  if tagz && tags && tags.length
    ul(class='inline-list tag-list')
      for tag in tagz.data
        if (tags.indexOf(tag.name) > -1) && (tag.sanitizedLength >= minCount)
          - var tagURL = url_for(tag.path)

          li
            if size
              a(class='tag tag-#{size}', href=tagURL, itemprop='articleSection')= tag.name
            else
              a.tag(href=tagURL, itemprop='articleSection')= tag.name

mixin pluralize(type, category, count)
  if count && count > 1
    div(class='aside ' + type + ' ' + type + '-' + category.plural)
      h3 #{type} #{category.plural}
      block
  else
    div(class='aside ' + type + ' ' + type + '-' + category.singular)
      h3 #{type} #{category.singular}
      block
